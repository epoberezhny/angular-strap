/**
 * angular-strap
 * @version v2.3.13 - 2022-02-08
 * @link http://mgcrea.github.io/angular-strap
 * @author Olivier Louvignes <olivier@mg-crea.com> (https://github.com/mgcrea)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
'use strict';angular.module('mgcrea.ngStrap.timepicker',['mgcrea.ngStrap.helpers.dateParser','mgcrea.ngStrap.helpers.dateFormatter','mgcrea.ngStrap.tooltip']).provider('$timepicker',function(){var e=this.defaults={animation:'am-fade',defaultDate:'auto',prefixClass:'timepicker',placement:'bottom-left',templateUrl:'timepicker/timepicker.tpl.html',trigger:'focus',container:!1,keyboard:!0,html:!1,delay:0,useNative:!0,timeType:'date',timeFormat:'shortTime',timezone:null,modelTimeFormat:null,autoclose:!1,minTime:-(1/0),maxTime:+(1/0),length:5,hourStep:1,minuteStep:5,secondStep:5,roundDisplay:!1,iconUp:'glyphicon glyphicon-chevron-up',iconDown:'glyphicon glyphicon-chevron-down',arrowBehavior:'pager'};this.$get=['$window','$document','$rootScope','$sce','$dateFormatter','$tooltip','$timeout',function(t,n,a,i,o,r,s){function u(t,n,a){function i(e){var t=6e4*p.minuteStep;return new Date(Math.floor(e.getTime()/t)*t)}function u(e,n){var a=e+n;if(t[0].createTextRange){var i=t[0].createTextRange();i.collapse(!0),i.moveStart('character',e),i.moveEnd('character',a),i.select()}else t[0].setSelectionRange?t[0].setSelectionRange(e,a):angular.isUndefined(t[0].selectionStart)&&(t[0].selectionStart=e,t[0].selectionEnd=a)}function m(){t[0].focus()}var c=r(t,angular.extend({},e,a)),g=a.scope,p=c.$options,$=c.$scope,f=p.lang,h=function(e,t,n){return o.formatDate(e,t,f,n)},v=0,w=p.roundDisplay?i(new Date):new Date,D=n.$dateValue||w,S={hour:D.getHours(),meridian:D.getHours()<12,minute:D.getMinutes(),second:D.getSeconds(),millisecond:D.getMilliseconds()},T=o.getDatetimeFormat(p.timeFormat,f),y=o.hoursFormat(T),N=o.timeSeparator(T),V=o.minutesFormat(T),b=o.secondsFormat(T),x=o.showSeconds(T),k=o.showAM(T);$.$iconUp=p.iconUp,$.$iconDown=p.iconDown,$.$select=function(e,t){c.select(e,t)},$.$moveIndex=function(e,t){c.$moveIndex(e,t)},$.$switchMeridian=function(e){c.switchMeridian(e)},c.update=function(e){angular.isDate(e)&&!isNaN(e.getTime())?(c.$date=e,angular.extend(S,{hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),millisecond:e.getMilliseconds()}),c.$build()):c.$isBuilt||c.$build()},c.select=function(e,t,a){n.$dateValue&&!isNaN(n.$dateValue.getTime())||(n.$dateValue='today'===p.defaultDate?new Date:new Date(1970,0,1)),angular.isDate(e)||(e=new Date(e)),0===t?n.$dateValue.setHours(e.getHours()):1===t?n.$dateValue.setMinutes(e.getMinutes()):2===t&&n.$dateValue.setSeconds(e.getSeconds()),n.$setViewValue(angular.copy(n.$dateValue)),n.$render(),p.autoclose&&!a&&s(function(){c.hide(!0)})},c.switchMeridian=function(e){if(n.$dateValue&&!isNaN(n.$dateValue.getTime())){var t=(e||n.$dateValue).getHours();n.$dateValue.setHours(t<12?t+12:t-12),n.$setViewValue(angular.copy(n.$dateValue)),n.$render()}},c.$build=function(){var e,t,n=$.midIndex=parseInt(p.length/2,10),a=[];for(e=0;e<p.length;e++)t=new Date(1970,0,1,S.hour-(n-e)*p.hourStep),a.push({date:t,label:h(t,y),selected:c.$date&&c.$isSelected(t,0),disabled:c.$isDisabled(t,0)});var i,o=[];for(e=0;e<p.length;e++)i=new Date(1970,0,1,0,S.minute-(n-e)*p.minuteStep),o.push({date:i,label:h(i,V),selected:c.$date&&c.$isSelected(i,1),disabled:c.$isDisabled(i,1)});var r,s=[];for(e=0;e<p.length;e++)r=new Date(1970,0,1,0,0,S.second-(n-e)*p.secondStep),s.push({date:r,label:h(r,b),selected:c.$date&&c.$isSelected(r,2),disabled:c.$isDisabled(r,2)});var u=[];for(e=0;e<p.length;e++)x?u.push([a[e],o[e],s[e]]):u.push([a[e],o[e]]);$.rows=u,$.showSeconds=x,$.showAM=k,$.isAM=(c.$date||a[n].date).getHours()<12,$.timeSeparator=N,c.$isBuilt=!0},c.$isSelected=function(e,t){return!!c.$date&&(0===t?e.getHours()===c.$date.getHours():1===t?e.getMinutes()===c.$date.getMinutes():2===t?e.getSeconds()===c.$date.getSeconds():void 0)},c.$isDisabled=function(e,t){var n;return 0===t?n=e.getTime()+6e4*S.minute+1e3*S.second:1===t?n=e.getTime()+36e5*S.hour+1e3*S.second:2===t&&(n=e.getTime()+36e5*S.hour+6e4*S.minute),p.minTime<=p.maxTime?n<1*p.minTime||n>1*p.maxTime:n<1*p.minTime&&n>1*p.maxTime},$.$arrowAction=function(e,t){'picker'===p.arrowBehavior?c.$setTimeByStep(e,t):c.$moveIndex(e,t)},c.$setTimeByStep=function(e,t){var n=new Date(c.$date||D),a=n.getHours(),i=n.getMinutes(),o=n.getSeconds();0===t?n.setHours(a-parseInt(p.hourStep,10)*e):1===t?n.setMinutes(i-parseInt(p.minuteStep,10)*e):2===t&&n.setSeconds(o-parseInt(p.secondStep,10)*e),c.select(n,t,!0)},c.$moveIndex=function(e,t){var n;0===t?(n=new Date(1970,0,1,S.hour+e*p.length,S.minute,S.second),angular.extend(S,{hour:n.getHours()})):1===t?(n=new Date(1970,0,1,S.hour,S.minute+e*p.length*p.minuteStep,S.second),angular.extend(S,{minute:n.getMinutes()})):2===t&&(n=new Date(1970,0,1,S.hour,S.minute,S.second+e*p.length*p.secondStep),angular.extend(S,{second:n.getSeconds()})),c.$build()},c.$onMouseDown=function(e){if('input'!==e.target.nodeName.toLowerCase()&&e.preventDefault(),e.stopPropagation(),d){var t=angular.element(e.target);'button'!==t[0].nodeName.toLowerCase()&&(t=t.parent()),t.triggerHandler('click')}},c.$onKeyDown=function(e){if(/(38|37|39|40|13)/.test(e.keyCode)&&!e.shiftKey&&!e.altKey){if(e.preventDefault(),e.stopPropagation(),13===e.keyCode)return void c.hide(!0);var t=new Date(c.$date),n=t.getHours(),a=h(t,y).length,i=t.getMinutes(),o=h(t,V).length,r=t.getSeconds(),s=h(t,b).length,l=1,d=/(37|39)/.test(e.keyCode),m=2+1*x+1*k;d&&(37===e.keyCode?v=v<1?m-1:v-1:39===e.keyCode&&(v=v<m-1?v+1:0));var $=[0,a],f=0;38===e.keyCode&&(f=-1),40===e.keyCode&&(f=1);var w=2===v&&x,D=2===v&&!x||3===v&&x;0===v?(t.setHours(n+f*parseInt(p.hourStep,10)),a=h(t,y).length,$=[0,a]):1===v?(t.setMinutes(i+f*parseInt(p.minuteStep,10)),o=h(t,V).length,$=[a+l,o]):w?(t.setSeconds(r+f*parseInt(p.secondStep,10)),s=h(t,b).length,$=[a+l+o+l,s]):D&&(d||c.switchMeridian(),$=[a+l+o+l+(s+l)*x,2]),c.select(t,v,!0),u($[0],$[1]),g.$digest()}};var M=c.init;c.init=function(){return l&&p.useNative?(t.prop('type','time'),void t.css('-webkit-appearance','textfield')):(d&&(t.prop('type','text'),t.attr('readonly','true'),t.on('click',m)),void M())};var F=c.destroy;c.destroy=function(){l&&p.useNative&&t.off('click',m),F()};var H=c.show;c.show=function(){!d&&t.attr('readonly')||t.attr('disabled')||(H(),s(function(){c.$element&&c.$element.on(d?'touchstart':'mousedown',c.$onMouseDown),p.keyboard&&t&&t.on('keydown',c.$onKeyDown)},0,!1))};var A=c.hide;return c.hide=function(e){c.$isShown&&(c.$element&&c.$element.off(d?'touchstart':'mousedown',c.$onMouseDown),p.keyboard&&t&&t.off('keydown',c.$onKeyDown),A(e))},c}var l=/(ip[ao]d|iphone|android)/gi.test(t.navigator.userAgent),d='createTouch'in t.document&&l;return e.lang||(e.lang=o.getDefaultLocale()),u.defaults=e,u}]}).directive('bsTimepicker',['$window','$parse','$q','$dateFormatter','$dateParser','$timepicker',function(e,t,n,a,i,o){var r=o.defaults,s=/(ip[ao]d|iphone|android)/gi.test(e.navigator.userAgent);return{restrict:'EAC',require:'ngModel',link:function(e,t,n,u){function l(e){if(angular.isDate(e)){if(m.minTime<=m.maxTime)var t=isNaN(m.minTime)||new Date(e.getTime()).setFullYear(1970,0,1)>=m.minTime,n=isNaN(m.maxTime)||new Date(e.getTime()).setFullYear(1970,0,1)<=m.maxTime;else var t=isNaN(m.minTime)||new Date(e.getTime()).setFullYear(1970,0,1)<=m.minTime,n=isNaN(m.maxTime)||new Date(e.getTime()).setFullYear(1970,0,1)>=m.maxTime;var a=t&&n;u.$setValidity('date',a),u.$setValidity('min',t),u.$setValidity('max',n),a&&(u.$dateValue=e)}}function d(){return!u.$dateValue||isNaN(u.$dateValue.getTime())?'':$(u.$dateValue,m.timeFormat)}var m={scope:e};angular.forEach(['template','templateUrl','controller','controllerAs','placement','container','delay','trigger','keyboard','html','animation','autoclose','timeType','timeFormat','timezone','modelTimeFormat','useNative','hourStep','minuteStep','secondStep','length','arrowBehavior','iconUp','iconDown','roundDisplay','id','prefixClass','prefixEvent','defaultDate'],function(e){angular.isDefined(n[e])&&(m[e]=n[e])});var c=/^(false|0|)$/i;angular.forEach(['html','container','autoclose','useNative','roundDisplay'],function(e){angular.isDefined(n[e])&&c.test(n[e])&&(m[e]=!1)}),angular.forEach(['onBeforeShow','onShow','onBeforeHide','onHide'],function(t){var a='bs'+t.charAt(0).toUpperCase()+t.slice(1);angular.isDefined(n[a])&&(m[t]=e.$eval(n[a]))}),s&&(m.useNative||r.useNative)&&(m.timeFormat='HH:mm');var g=o(t,u,m);m=g.$options;var p=m.lang,$=function(e,t,n){return a.formatDate(e,t,p,n)};n.bsShow&&e.$watch(n.bsShow,function(e,t){g&&angular.isDefined(e)&&(angular.isString(e)&&(e=!!e.match(/true|,?(timepicker),?/i)),e===!0?g.show():g.hide())});var f=i({format:m.timeFormat,lang:p});angular.forEach(['minTime','maxTime'],function(e){angular.isDefined(n[e])&&n.$observe(e,function(t){g.$options[e]=f.getTimeForAttribute(e,t),isNaN(g.$options[e])||g.$build(),l(u.$dateValue)})}),e.$watch(n.ngModel,function(e,t){g.update(u.$dateValue)},!0),u.$parsers.unshift(function(e){var t;if(!e)return u.$setValidity('date',!0),null;var n=angular.isDate(e)?e:f.parse(e,u.$dateValue);return!n||isNaN(n.getTime())?void u.$setValidity('date',!1):(l(n),'string'===m.timeType?(t=f.timezoneOffsetAdjust(n,m.timezone,!0),$(t,m.modelTimeFormat||m.timeFormat)):(t=f.timezoneOffsetAdjust(u.$dateValue,m.timezone,!0),'number'===m.timeType?t.getTime():'unix'===m.timeType?t.getTime()/1e3:'iso'===m.timeType?t.toISOString():new Date(t)))}),u.$formatters.push(function(e){var t;return t=angular.isUndefined(e)||null===e?NaN:angular.isDate(e)?e:'string'===m.timeType?f.parse(e,null,m.modelTimeFormat):'unix'===m.timeType?new Date(1e3*e):new Date(e),u.$dateValue=f.timezoneOffsetAdjust(t,m.timezone),d()}),u.$render=function(){t.val(d())},e.$on('$destroy',function(){g&&g.destroy(),m=null,g=null})}}}]);
//# sourceMappingURL=timepicker.min.js.map
